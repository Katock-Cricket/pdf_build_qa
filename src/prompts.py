#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
提示词模板模块
用于管理问答生成相关的提示词模板
"""


easy_level_prompt = """
4. 问题难度应符合卫星互联网入门知识领域，例如常见专业术语概念讲解、基础理论方法讲解、业界常识等。
"""


class PromptTemplates:
    """提示词模板类，用于生成各种提示词"""

    @staticmethod
    def get_pro_question_generation_prompt(content, num_questions, metadata=None):
        """
        生成问题列表的prompt模板

        Args:
            content (str): 文档内容
            num_questions (int): 问题数量
            metadata (dict): PDF元数据（可选）

        Returns:
            str: 格式化后的提示词
        """
        return f"""
你是一位卫星互联网领域的资深研究员和博士导师，需要根据以下学术文献内容，提炼出{num_questions}个高质量的研究问题。

【角色定位】：
你是卫星互联网领域的专家，精通卫星通信、信号处理、网络协议、轨道设计等相关技术。

【问题类型指引】：
建议但不限于以下类型的问题（请根据文档实际内容灵活选择）：
1. 理论原理类：核心概念、基础理论、数学模型、物理原理
2. 技术方法类：算法设计、实现方案、优化策略、关键技术
3. 系统架构类：系统设计、模块组成、协议栈、接口定义
4. 性能分析类：性能指标、复杂度分析、对比优势、适用场景
5. 应用场景类：实际应用、工程实践、问题解决、未来展望

【重要要求】：
1. 问题必须基于文档内容，提取文档中真实存在的知识点
2. 不要问"本文/该论文怎么样"这类针对论文本身的问题
3. 问题应该是领域知识问题，而非论文工作评价
4. 问题难度应达到博士或资深研究者水平
5. 问题应该具有提炼能力，抓住核心要点
6. 如果文档中没有某类型的内容，可以自主调整问题类型

【文档内容】：
{content}

请仅返回JSON格式的问题列表，每个问题包含'question'和'type'字段：
[
  {{"question": "问题1的具体内容", "type": "理论原理类"}},
  {{"question": "问题2的具体内容", "type": "技术方法类"}},
  ...
]"""

    @staticmethod
    def get_pro_answer_generation_prompt(question, content, metadata=None):
        """
        生成单个答案的prompt模板

        Args:
            question (str): 问题内容
            content (str): 文档内容
            metadata (dict): PDF元数据（可选）

        Returns:
            str: 格式化后的提示词
        """
        return f"""
你是一位卫星互联网领域的资深研究员和博士导师，需要针对以下问题，基于提供的学术文献内容，给出一个详尽、专业、体系化的答案。

【角色定位】：
你是卫星互联网领域的专家，精通卫星通信、信号处理、网络协议、轨道设计等相关技术。

【问题】：
{question}

【答案要求】：
1. **长度要求**：答案应至少500-800字，确保内容充分详尽
2. **内容结构**：
   - 首先给出清晰的定义或概念说明
   - 详细阐述理论原理和技术机制
   - 如涉及数学模型，给出公式推导和参数说明
   - 提供技术细节和实现要点
   - 必要时给出实例说明或应用场景
   - 说明与相关技术的关系或对比
   - 直接给出答案，不要解释你是什么角色、基于什么文献。如果领域与卫星互联网无关，也直接作答，不要说"该领域与卫星互联网无关"。
3. **专业性要求**：
   - 使用准确的学术术语和技术词汇
   - 体现专家级的深度理解
   - 答案应成体系化，有清晰的逻辑层次
4. **准确性要求**：
   - 答案必须基于提供的文档内容
   - 不要编造文档中不存在的信息
   - 如果文档信息不足，说明已知部分即可

【参考文档】：
{content}

请直接返回详细的答案内容（不需要JSON格式，直接返回答案文本）："""

    @staticmethod
    def get_normal_qa_pair_generation_prompt(content, num_questions, metadata=None):
        """
        生成问答对的prompt模板

        Args:
            content (str): 文档内容
            num_questions (int): 问题数量
            metadata (dict): PDF元数据（可选）

        Returns:
            str: 格式化后的提示词
        """
        return f"""
你是一位卫星互联网领域的资深研究员和博士导师，需要根据以下学术文献内容，研究总结{num_questions}个高质量的问答对。
核心目的：这些问答对将用于从科研文档中提取卫星互联网领域知识，微调领域专家大模型。

【问答对要求】：
1. 问题必须基于文档内容，提取文档中真实存在的知识点
2. 不要问"本文/该论文怎么样"这类针对论文本身的问题
3. 问题应该是领域知识问题，而非论文工作评价
4. {easy_level_prompt}
5. 对每个问题直接给出答案，不要解释你是什么角色、基于什么文献。如果领域与卫星互联网关系不大，也直接作答，不要说"该领域与卫星互联网无关"。

【参考文档】：
{content}

请仅返回JSON格式的问题列表，每个问题包含'question'和'answer'字段：
[
  {{"question": "问题1的具体内容", "answer": "答案1的具体内容"}},
  {{"question": "问题2的具体内容", "answer": "答案2的具体内容"}},
  ...
]"""